import{u as j}from"./products-s15IbYA0.js";import{u as z}from"./cart-DR6FrxMi.js";import{u as E}from"./favorites-CO12HdTJ.js";import{d as I,s as L,r as g,m as G,n as H,o as n,c as i,w as l,V as M,u as J,p as K,b as a,i as S,l as w,e as p,q as x,t as O,v as r,x as Q,f as F,y as W,z as V,A as X,h as C,B as b,C as Y,D as Z,F as ee,E as ae,G as te,g as le,a as T,H as oe,j as se,k as P,I as re}from"./index-B9alvvQT.js";const ue={class:"d-flex align-center justify-space-between"},ne={class:"text-h6"},fe=I({__name:"ProductListPage",setup(ie){const N=J(),R=K(),d=j(),B=z(),U=E(),{paginatedProducts:$,loading:_,error:y,categories:q,totalPages:k}=L(d),m=g(""),c=g(""),o=g([0,1e3]),u=g(1);G(async()=>{const{title:s,category:t,minPrice:e,maxPrice:f,page:h}=N.query;s&&(m.value=s),t&&(c.value=t),e&&(o.value[0]=Number(e)),f&&(o.value[1]=Number(f)),h&&(u.value=Number(h)),await Promise.all([d.fetchProducts(),d.fetchCategories()])});const A=s=>{B.addToCart(s)},D=s=>{U.toggleFavorite(s)},v=()=>{R.push({query:{title:m.value||void 0,category:c.value||void 0,minPrice:o.value[0]||void 0,maxPrice:o.value[1]||void 0,page:u.value>1?u.value:void 0}}),d.updateFilter({title:m.value,category:c.value,minPrice:o.value[0],maxPrice:o.value[1],page:u.value})};return H(u,s=>{d.setPage(s),v()}),(s,t)=>(n(),i(M,null,{default:l(()=>[a(F,{class:"mb-6"},{default:l(()=>[a(S,null,{default:l(()=>[a(w,null,{default:l(()=>[a(p,{cols:"12",sm:"4"},{default:l(()=>[a(x,{modelValue:m.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>m.value=e),v],label:"Search products","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),a(p,{cols:"12",sm:"4"},{default:l(()=>[a(O,{modelValue:c.value,"onUpdate:modelValue":[t[1]||(t[1]=e=>c.value=e),v],items:r(q),label:"Category",variant:"outlined",density:"comfortable","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(p,{cols:"12",sm:"4"},{default:l(()=>[a(Q,{modelValue:o.value,"onUpdate:modelValue":[t[4]||(t[4]=e=>o.value=e),v],min:0,max:1e3,step:10,label:"Price range","hide-details":""},{prepend:l(()=>[a(x,{modelValue:o.value[0],"onUpdate:modelValue":t[2]||(t[2]=e=>o.value[0]=e),type:"number",variant:"outlined",density:"comfortable","hide-details":"",style:{width:"100px"}},null,8,["modelValue"])]),append:l(()=>[a(x,{modelValue:o.value[1],"onUpdate:modelValue":t[3]||(t[3]=e=>o.value[1]=e),type:"number",variant:"outlined",density:"comfortable","hide-details":"",style:{width:"100px"}},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),r(_)?(n(),i(W,{key:0,indeterminate:"",color:"primary",class:"d-flex mx-auto my-8"})):V("",!0),r(y)?(n(),i(X,{key:1,type:"error",class:"mb-6"},{default:l(()=>[C(b(r(y)),1)]),_:1})):V("",!0),!r(_)&&!r(y)?(n(),i(w,{key:2},{default:l(()=>[(n(!0),Y(ee,null,Z(r($),e=>(n(),i(p,{key:e.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[a(F,null,{default:l(()=>[a(te,{src:e.image,height:"200",cover:"",class:"bg-grey-lighten-2"},null,8,["src"]),a(le,{class:"text-truncate"},{default:l(()=>[C(b(e.title),1)]),_:2},1024),a(S,null,{default:l(()=>[T("div",ue,[T("span",ne,"$"+b(e.price),1),a(oe,{"model-value":e.rating.rate,readonly:"",density:"compact",size:"small"},null,8,["model-value"])])]),_:2},1024),a(se,null,{default:l(()=>[a(P,{variant:"text",to:`/products/${e.id}`},{default:l(()=>t[6]||(t[6]=[C(" Details ")])),_:2},1032,["to"]),a(re),a(P,{icon:"mdi-heart",variant:"text",onClick:f=>D(e)},null,8,["onClick"]),a(P,{icon:"mdi-cart",variant:"text",onClick:f=>A(e)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):V("",!0),r(k)>1?(n(),i(ae,{key:3,modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=e=>u.value=e),length:r(k),class:"mt-6"},null,8,["modelValue","length"])):V("",!0)]),_:1}))}});export{fe as default};
